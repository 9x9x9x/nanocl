ApiVersion: v1
Type: deployment

Namespace: global

Proxy:
  - Name: getting-started
    Watch:
      - getting-started
    Rules:
      - Mode: Http
        Domain: get-started.com
        ListenOn: {{system.public_ip}}
        Location:
          - Path: /
            TargetCargo: getting-started
            TargetPort: 9000
          - Path: /doc
            TargetCargo: next-hat-doc
            TargetPort: 8080

Cargoes:
  - Name: getting-started
    Container:
      Image: nexthat/nanocl-get-started
      Env :
        - NODE_ENV=production
        - APP=LANDING
        - CLUSTER={{vars.CLUSTER}}
